webpackJsonp([1],{"+4Cn":function(t,e,s){t.exports=s.p+"application-x-font-otf.svg"},"+8Vz":function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"thread-footer"},[t.composing?s("div",{staticClass:"compose-post-area"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textToPost,expression:"textToPost"}],ref:"textarea",attrs:{cols:"60",rows:"10",resize:"none"},domProps:{value:t.textToPost},on:{input:function(e){e.target.composing||(t.textToPost=e.target.value)}}}),t._v(" "),s("div",{staticClass:"compose-action-container"},[s("button",{on:{click:t.postClicked}},[t._v("SUBMIT")]),t._v(" "),s("button",{on:{click:t.cancelCompose}},[t._v("CANCEL")]),t._v(" "),s("button",{on:{click:t.clearComposed}},[t._v("CLEAR")])]),t._v(" "),s("div",{staticClass:"upload-container"},[s("div",{staticClass:"upload-preview-container"},[s("canvas",{ref:"canvas",staticClass:"upload-preview",attrs:{width:t.previewWidth,height:t.previewHeight}})]),t._v(" "),s("input",{ref:"filein",attrs:{type:"file"},on:{change:t.uploadAttachment}}),t._v(" "),s("div",{staticClass:"upload-ready"},[t._v(t._s(t.prettyUploadReady))])])]):s("div",[s("button",{on:{click:t.toComposeMode}},[t._v("POST")])])])},staticRenderFns:[]};e.a=i},"+Gzf":function(t,e,s){t.exports=s.p+"text-x-sass.svg"},"+cEe":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("M4fF");s.n(i);function o(t,e){return"string"==typeof t?i.assign(e,{id:t}):i.assign(e,{id:t[0],author:t[1],group:t[2]})}},"/65J":function(t,e,s){t.exports=s.p+"application-x-gzip.svg"},"/Emu":function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"thread-panel"},[s("div",{staticClass:"left-controls"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.threadIdToJoin,expression:"threadIdToJoin"}],attrs:{placeholder:"Thread ID to join"},domProps:{value:t.threadIdToJoin},on:{input:function(e){e.target.composing||(t.threadIdToJoin=e.target.value)}}}),t._v(" "),s("button",{on:{click:function(e){t.joinThread(t.threadIdToJoin,t.last100?100:t.postsToShow)}}},[t._v("JOIN")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.last100,expression:"last100"}],staticClass:"vertical-center",attrs:{type:"checkbox",name:"last100"},domProps:{checked:Array.isArray(t.last100)?t._i(t.last100,null)>-1:t.last100},on:{change:function(e){var s=t.last100,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&(t.last100=s.concat([null])):n>-1&&(t.last100=s.slice(0,n).concat(s.slice(n+1)))}else t.last100=o}}}),t._v(" "),s("label",{staticClass:"vertical-center",attrs:{for:"last100"}},[t._v("Last 100")]),t._v(" "),s("button",{on:{click:t.toggleTest}},[t._v(t._s(t.testButMsg))]),t._v(" "),t.thread.backlogReplicated||t.thread.isEmpty?t.thread.isEmpty?s("div",{staticClass:"vertical-center"},[s("span",[t._v("Thread seems to be empty. Be the first poster.")])]):t._e():s("div",{staticClass:"thread-replicating vertical-center"},[s("div",{staticClass:"loading-spinner"}),t._v(" "),s("span",[t._v("Replicating thread history "+t._s(t.prettyProgress))])])]),t._v(" "),s("div",{staticClass:"right-controls"},[s("div",{staticClass:"vertical-center",staticStyle:{display:"inline-block"},attrs:{title:t.threadAddress}},[t._v("\n        Current thread: "+t._s(t.threadId)+"\n      ")]),t._v(" "),s("button",{attrs:{title:"Copy full address to clipboard"},on:{click:t.copyAddress}},[t._v("ðŸ“‹")]),t._v(" "),s("div",{staticClass:"vertical-center",staticStyle:{display:"inline-block"}},[t._v("\n        Synced: ["+t._s(t.thread.synced.length)+"]\n      ")])])])},staticRenderFns:[]};e.a=i},"/nUx":function(t,e,s){"use strict";var i=s("loU4"),o=s.n(i),n=s("7Vn2"),a=s.n(n),r=s("vEmb"),c=s.n(r);class LocalStore{constructor(t,e,s){this.db=o()(t,{db:a.a}),this.data=e||{},this.defaults=s||{}}static from(t){return new LocalStore(t.path(),t,t.defaults())}async load(){if(this.defaults)for(const t in this.defaults)this.data[t]||(this.data[t]=this.defaults[t]);const t={};await Promise.all(Object.keys(this.data).map(async e=>{const s=await this.getResolve(e);console.log(t),void 0!==s&&(t[e]=s)})),Object.assign(this.data,t),console.log("done loading",this.data)}async save(){const t=this.batchChain();Object.entries(this.data).forEach(([e,s])=>{t.put(e,JSON.stringify(s))}),await t.write()}put(t,e){return c()(this.db.put,[t,JSON.stringify(e)],this.db)}get(t){return c()(this.db.get,[t],this.db)}del(t){return c()(this.db.del,[t],this.db)}batch(t){return t?c()(this.db.batch,t,this.db):this.db.batch()}get isOpen(){return this.db.isOpen()}get isClosed(){return this.db.isClosed()}createReadStream(t){return this.db.createReadStream(t)}createKeyStream(t){return this.db.createKeyStream()}createValueStream(t){return this.db.createValueStream()}batchArray(t){return this.batch(t)}batchChain(){return this.batch()}async getResolve(t){const e=this;return new Promise(s=>{e.get(t).then(e=>{console.log(t,e),s("{"===e[0]||"["===e[0]||'"'===e[0]?JSON.parse(e):e)},t=>s(void 0))})}}e.a=LocalStore},"/oLT":function(t,e,s){"use strict";e.a=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},0:function(t,e){},"006t":function(t,e,s){"use strict";s.d(e,"a",function(){return Log});const i=s("Oc3w");class DAGNode{constructor(t,e){this.value=t,this.next=e||this}get hasNext(){return this!==this.next}}class Log{constructor(){this._nodes={},this._stubs=[],this.heads=[],this.ordered=[],this.dropRules=[]}prepend(t){const e=i.toB58String(t.hash),s=t.hash;if(!this._nodes[e]){const i=new DAGNode(t);let o=0;for(const t of this._stubs)0!==t.value.type&&0===t.value.heads[0].compare(s)&&(t.next=i,o++,this._stubs.splice(this._stubs.indexOf(t),1));return 0===o&&this.heads.push(i),this._nodes[e]=i,this._stubs.push(i),this._insertOrdered(t),!0}return!1}append(t){const e=i.toB58String(t.hash);t.hash;if(!this._nodes[e]){if(0===t.type){const s=new DAGNode(t);this._nodes[e]=s,this.heads.push(s)}if(1===t.type){const s=this._nodes[i.toB58String(t.heads[0])],o=new DAGNode(t,s||void 0);if(void 0===s)this._stubs.push(o);else{const t=this.heads.indexOf(s);t>=0&&this.heads.splice(t,1)}this._nodes[e]=o,this.heads.push(o)}return this._insertOrdered(t),!0}return!1}_insertOrdered(t){let e,s=!1;for(let i=0;i<this.ordered.length;i++){if(e=this.ordered[i],t.clock<e.clock){this.ordered.splice(i,0,t),s=!0;break}if(t.clock===e.clock&&t.hash.compare(e.hash)<0){this.ordered.splice(i,0,t),s=!0;break}}s||this.ordered.push(t)}validate(t){const e=[];let s;for(const i of this.dropRules)(s=i(t))&&e.push(s);return e}}},"0dU7":function(t,e,s){t.exports=s.p+"application-epub+zip.svg"},1:function(t,e){},10:function(t,e){},2:function(t,e){},"2XwM":function(t,e,s){"use strict";var i=s("7+uW"),o=s("NYxO"),n=s("/nUx"),a=s("kUbn");i.default.use(o.a),e.a=new o.a.Store({state:{ipfsNode:null,ipfsInfo:{id:"",publicKey:""},globalData:new n.a(a.a?"global/data":"global/data-dev"),globalConfig:new n.a(a.a?"global/config":"global/config-dev"),userConfigs:{},threadConfigs:{},currentUser:"default"},getters:{isDBReady:t=>null!==t.ipfsNode,areUsersReady:t=>0!==Object.keys(t.userConfigs).length,userConfigs:t=>t.userConfigs,threadConfigs:t=>t.threadConfigs},mutations:{updateIpfsNode(t,{newIpfsNode:e,newInfo:s}){t.ipfsNode=e,t.ipfsInfo=s},updateUserConfig(t,e){i.default.set(t.userConfigs,e.data.userName,e)},updateThreadConfig(t,e){e.save(),i.default.set(t.threadConfigs,e.data.threadName,e)},updateUser(t,{newUser:e}){console.log("b",t),t.currentUser=e,console.log("a",t),t.globalConfig.put("currentUser",e)}},actions:{async addUserConfig({state:t},e){const s=n.a.from(e);await s.load(),i.default.set(t.userConfigs,e.userName,s);const o=await t.globalConfig.getResolve("users");o?(o.push(e.userName),await t.globalConfig.put("users",[...new Set(o)])):await t.globalConfig.put("users",[e.userName])},async addThreadConfig({state:t},e){const s=n.a.from(e);await s.load(),i.default.set(t.threadConfigs,e.threadName,s)}},modules:{},plugins:[]})},"2ana":function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".thread-footer{display:flex;max-height:25vh}.compose-post-area{flex-grow:1;display:flex;flex-direction:row}.upload-container{flex-grow:1;display:flex;flex-direction:column;flex-wrap:wrap-reverse}.upload-preview-container{flex-grow:1}.upload-preview-container *{margin-left:auto;margin-right:auto;max-width:100%;max-height:100%}.compose-action-container{display:flex;flex-direction:column;justify-content:flex-end}",""])},3:function(t,e){},"32sK":function(t,e,s){t.exports=s.p+"virtualbox-vbox-extpack.svg"},"3oC0":function(t,e,s){"use strict";(function(t){var i=s("kKK/"),o=s("006t"),n=s("yUUW");const a=s("Oc3w"),r=(s("+ELM"),"mary had a little lamb"),c="0.1";e.a=class Kelp{constructor(t,e){this._fetchingHashes=new Set,this._numHashesInMeta=100,this._numEntriesSinceMeta=1/0,this._metaIntervalHandle=0,this._initialized=!1,this.behindBy=0,e=encodeURIComponent(e),this._log=new o.a,this._ipfs=t,this._topic=e,this._clock=0;let s=("0000000"+Object(i.a)(r+c+e).toString(16)).slice(-8).toUpperCase();this.address=`/kelp/${s}/${e}`}async init(){this._initialized?console.log("KELP: Refusing to initialize again",this.address):(console.log("KELP: Initializing",this.address),this._pubsubHandlerInstance=this._pubsubHandler.bind(this),await this._ipfs.pubsub.subscribe(this.address,{discover:!0},this._pubsubHandlerInstance),this._metaIntervalHandle=window.setInterval(this._metaInterval.bind(this),1e4),this._initialized=!0)}async destroy(){console.log("KELP: Destroying",this.address),this.onupdate=void 0,this._ipfs.pubsub.unsubscribe(this.address,this._pubsubHandlerInstance),window.clearInterval(this._metaIntervalHandle),this._initialized=!1}get entries(){return this._log.ordered}async _metaInterval(){console.log("KELP: Meta Interval");const e=await this._ipfs.pubsub.peers(this.address);if(console.log("KELP: Peers",e),Math.random()*e.length<1&&this._clock>0){const e={type:3,clock:this._clock,left:Math.max(this.entries.length-this._numHashesInMeta,0),heads:this.entries.slice(-this._numHashesInMeta).map(t=>t.hash),hash:t.alloc(34)};await this._ipfs.pubsub.publish(this.address,Object(n.d)(e)),console.log("KELP: Pubbed transient Meta Entry",e)}}_pubsubHandler(t){console.log("KELP: Got pubsub",t);const e=Object(n.b)(t.data);3!==e.type?(this._ipfs.object.put(t.data),this._handleEntry(e,"append")):this._fetchHeads(e)}_fetchHeads(t){if(0!==t.type){2===t.type&&(this.behindBy=t.left+1-this.entries.length);for(const e of t.heads){const t=a.toB58String(e);if(!this._log._nodes[t]&&!this._fetchingHashes.has(t)){this._fetchingHashes.add(t);const s=this;this._ipfs.object.get(e,(i,o)=>{if(i)return void console.log("Failed to get a referenced Entry",i);console.log("Got ipfs object");const a=Object(n.a)(e,o.data);s._fetchingHashes.delete(t),s._handleEntry(a,"prepend")})}}}}_handleEntry(t,e){"prepend"===e&&(this._log.prepend(t),this.behindBy-=1),"append"===e&&this._log.append(t),this._clock=Math.max(this._clock,t.clock)+1,2===t.type?this._numEntriesSinceMeta=0:this._numEntriesSinceMeta+=1,0!==t.type&&this._fetchHeads(t),this.onupdate&&this.onupdate(t)}async makeRoot(t){console.log("Making root");const e=Object.assign({},{type:0,clock:0,payload:t}),s=await this._ipfs.object.put(Object(n.c)(e)),i=Object.assign(e,{hash:s.multihash});await this._ipfs.pubsub.publish(this.address,Object(n.d)(i))}async append(e){if(0===this._clock)for(await this.makeRoot(t.from("{}"));0===this._log.heads.length;)await new Promise(t=>window.setTimeout(t,100));const s=Object.assign({},{type:1,clock:this._clock,payload:e,heads:this._log.heads.map(t=>t.value.hash)}),i=await this._ipfs.object.put(Object(n.c)(s));console.log("KELP: Done putting",i);const o=Object.assign(s,{hash:i.multihash});await this._ipfs.pubsub.publish(this.address,Object(n.d)(o)),console.log("KELP: Done pubbing",o),this._maybeMakeMeta()}async _maybeMakeMeta(){let t=!1;if(this._numEntriesSinceMeta>=this._numHashesInMeta&&(t=!0),t){const t={type:2,clock:this._clock,left:Math.max(this.entries.length-100,0),heads:this.entries.slice(-100).map(t=>t.hash)},e=await this._ipfs.object.put(Object(n.c)(t)),s=Object.assign(t,{hash:e.multihash});await this._ipfs.pubsub.publish(this.address,Object(n.d)(s)),console.log("KELP: Made a MetaEntry",s)}return console.log("KELP: Didn't make a MetaEntry"),t}}}).call(e,s("63KW").Buffer)},4:function(t,e){},"40ld":function(t,e,s){t.exports=s.p+"image-gif.svg"},"4Isw":function(t,e,s){"use strict";var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("span",[this._v("Preparing node...")])])}]};e.a=i},"4bMi":function(t,e,s){t.exports=s.p+"application-x-bzip.svg"},"4irr":function(t,e,s){t.exports=s.p+"application-atom+xml.svg"},"4kgo":function(t,e,s){t.exports=s.p+"application-x-designer.svg"},5:function(t,e){},"5sA8":function(t,e,s){var i=s("XDKp");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("7c07e3bf",i,!0)},6:function(t,e){},"63PA":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"htmlEscape",function(){return l}),s.d(e,"die",function(){return u}),s.d(e,"dice",function(){return f}),s.d(e,"quoteLine",function(){return h}),s.d(e,"postLink",function(){return p}),s.d(e,"limitLength",function(){return d});var i=s("+cEe"),o=s("/oLT"),n=s("RCmh");const a="iz",r="base",c="base/rand",l=Object(i.a)(["htmlEscape",a,r],t=>(t.text=Object(o.a)(t.text),t)),d=Object(i.a)(["limitLength",a,r],t=>(t.text.length>n.b&&(t.text=Object(o.a)(t.text.substring(0,n.b)),t.notes.push({type:"WARNING",id:"post-too-long",message:"This post was too long, and has been truncated to an acceptable length. Formatting has been lost."})),t)),p=Object(i.a)(["postlink",a,r],(t,e)=>(t.text=t.text.replace(/(&gt;&gt;)([0-z]{46})(\s|$)/g,(s,i,o,n)=>{t.notes.push({id:"references-"+o+"-"+Math.random(),type:"INFO",group:"references",message:o});let a=!1;const r=e.kv.self._postById[o];e.kv.nodeId;void 0===r&&(a=!0);const c=a?"span":"a";return`<${c} class="post-post-link" ${a?"":`href="#post-${o}"`}>${n}</${c}>`}),t)),h=Object(i.a)(["quoteline",a,r],t=>(t.text=t.text.replace(/^&gt;(.*)$/gm,(t,e)=>e.startsWith("&gt;")?t:`<span class="quote">${t}</span>`),t)),u=Object(i.a)(["die",a,c],(t,e)=>(t.text=t.text.replace(/#d(\d+)/g,(s,i)=>{let o=Number(i);return isNaN(o)?(t.notes.push({id:"nan-sided-die",type:"ERROR",message:"The regex should prevent this, how did you do it?"}),`<span class="error-inline die-roll">${s}(wut)</span>`):o>n.d?(t.notes.push({id:"large-die",type:"ERROR",message:"Cowardlily refusing to roll a die that large."}),`<span class="error-inline die-roll">${s}(the die crushes you under it's weight)</span>`):`<span class="die-roll">${s}(${e.rng.nextRange(1,o+1)})</span>`}),t)),f=Object(i.a)(["dice",a,c],(t,e)=>(t.text=t.text.replace(/#(\d+)d(\d+)/g,(s,i,o)=>{let a=Number(i),r=Number(o);if(isNaN(a)||isNaN(r))return t.notes.push({id:"invalid-dice",type:"ERROR",message:"The regex should prevent this, how did you do it?"}),`<span class="error-inline dice-roll">${s}(wut)</span>`;if(r>n.d)return t.notes.push({id:"large-dice",type:"ERROR",message:"Cowardlily refusing to roll dice that large."}),`<span class="error-inline dice-roll">${s}(the first die crushes you under it's weight)</span>`;if(a>n.c)return t.notes.push({id:"many-dice",type:"ERROR",message:"Cowardlily refusing to roll that many dice."}),`<span class="error-inline dice-roll">${s}(the dice spill everywhere - oddly, this does not constitute a roll)</span>`;if(a*r>n.d)return t.notes.push({id:"some-medium-dice",type:"ERROR",message:`Cowardlily refusing to roll ${a} dice with ${r} sides. (dice * sides = ${a*r})`}),`<span class="error-inline dice-roll">${s}(the dice collapse together into a miniature black hole, which promptly fizzles out)</span>`;let c=[];for(let t=0;t<a;t++)c.push(e.rng.nextRange(1,r+1));let l=c.reduce((t,e)=>t+e,0);return`<span class="dice-roll">${s}(${c.join(" + ")} = ${l})</span>`}),t))},"6ZTd":function(t,e,s){t.exports=s.p+"application-x-shockwave-flash.svg"},7:function(t,e){},8:function(t,e){},"84FM":function(t,e,s){var i=s("LH/s");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("03c3fbfa",i,!0)},"8rlK":function(t,e,s){t.exports=s.p+"image-png.svg"},"8suY":function(t,e,s){t.exports=s.p+"image-bmp.svg"},9:function(t,e){},"92/2":function(t,e,s){"use strict";e.a=function(t){const e=document.createElement("textarea");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=t,document.body.appendChild(e),e.select();let s=!1;try{s=document.execCommand("copy")}catch(e){console.error("Copy to clipboard failed",t)}s||window.alert("Copy to clipboard failed, you're likely using an older browser.\nCopy the text manually from this window instead.\n\n"+t);document.body.removeChild(e)}},"9G5C":function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".thread-panel{display:flex;justify-content:space-between;background-color:#b294bb;color:#fff}.left-controls{display:flex;flex-grow:1}.left-controls *{margin-left:.1em}.right-controls{display:flex;justify-content:flex-end;flex-grow:1}.right-controls *{margin-right:.1em}.loading-spinner,.thread-replicating{display:inline-block}.loading-spinner{border:2px solid #fff;border-top:2px solid #40effc;border-radius:50%;width:.7em;height:.7em;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""])},"9G98":function(t,e,s){var i=s("ZJsj");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("01038b10",i,!0)},"9Rif":function(t,e,s){"use strict";var i=s("VSPr"),o=s("cE0w");var n=function(t){s("5sA8")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},"9e1J":function(t,e,s){t.exports=s.p+"video-x-theora+ogg.svg"},AKhD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("uMhA"),o=(s.n(i),s("qw2f")),n=(s.n(o),s("mS9O")),a=(s.n(n),s("9G98")),r=(s.n(a),s("X+2U"),s("SJBB"),s("NxGh"),s("DeYy"),s("C266"),s("zTrq"),s("9Rif"),s("k8aq"),s("7+uW")),c=s("NYxO"),l=s("2XwM"),d=s("tVzK"),p=s("HBTi"),h=s("EWfp");const u=new(s("Fyj0"))(p.a);r.default.directive("focus",{inserted:function(t){t.focus()}});new r.default({el:"#root",store:l.a,computed:Object(c.b)(["dbReady"]),components:{app:h.a}});u.once("ready",()=>u.id(async(t,e)=>{if(t)throw t;l.a.commit("updateIpfsNode",{newIpfsNode:u,newInfo:e});const s=await l.a.state.globalConfig.getResolve("users");let i=s||[];void 0===s&&(l.a.state.globalConfig.put("users",["default"]),i=["default"]),await Promise.all(i.map(async t=>{await l.a.dispatch("addUserConfig",new d.a(t))}));const o=await l.a.state.globalConfig.getResolve("currentUser");o&&l.a.commit("updateUser",{newUser:o})}))},AMsT:function(t,e,s){t.exports=s.p+"application-x-bittorrent.svg"},APhI:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"*,body{word-wrap:break-word}body{padding:0;margin:0;font-size:15px;color:#c5c8c6;background-color:#1d1f21}.link,a{color:#81a2be;text-decoration:none;cursor:pointer}.link:hover,a:hover{color:#81a2be;text-decoration:underline}img{width:100%;height:100%;object-fit:contain}.hash{display:inline-block;font-family:monospace;font-size:.9em}.horizontal-center{margin-left:auto;margin-right:auto}.vertical-center{margin-top:auto;margin-bottom:auto}",""])},B7lx:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"*,body{word-wrap:break-word}body{padding:0;margin:0;font-size:15px;color:#c5c8c6;background-color:#1d1f21}.link,.post-post-link,a{color:#81a2be;text-decoration:none;cursor:pointer}.link:hover,.post-post-link:hover,a:hover{color:#81a2be;text-decoration:underline}img{width:100%;height:100%;object-fit:contain}.hash{display:inline-block;font-family:monospace;font-size:.9em}.horizontal-center{margin-left:auto;margin-right:auto}.vertical-center{margin-top:auto;margin-bottom:auto}.quote{color:#b5bd68}.post-post-link{display:inline}",""])},BHHE:function(t,e,s){t.exports=s.p+"application-x-ar.svg"},BK91:function(t,e,s){"use strict";var i=s("8suY"),o=s.n(i),n=s("40ld"),a=s.n(n),r=s("Qe1a"),c=s.n(r),l=s("8rlK"),d=s.n(l),p=s("nsIE"),h=s.n(p),u=s("SZ9U"),f=s.n(u),g=s("BcM3"),m=s.n(g),v=s("pYpQ"),x=s.n(v),b=s("M2Ah"),y=s.n(b),_=s("HbUH"),w=s.n(_),k=s("xHMk"),C=s.n(k),E=s("gmFm"),$=s.n(E),P=s("pS9q"),T=s.n(P),I=s("YRTA"),U=s.n(I),O=s("VfHM"),N=s.n(O),R=s("9e1J"),S=s.n(R),j=s("Qxn1"),A=s.n(j),B=s("MyKX"),M=s.n(B),D=s("go7W"),H=s.n(D),z=s("NwvP"),L=s.n(z),F=s("k2PE"),K=s.n(F),V=s("Y2SX"),W=s.n(V),J=s("Vjvj"),q=s.n(J),Z=s("LPic"),G=s.n(Z),Q=s("UaoV"),Y=s.n(Q),X=s("uqFA"),tt=s.n(X),et=s("vviU"),st=s.n(et),it=s("L9Av"),ot=s.n(it),nt=s("C/jo"),at=s.n(nt),rt=s("CZ53"),ct=s.n(rt),lt=s("Tpb9"),dt=s.n(lt),pt=s("hF7q"),ht=s.n(pt),ut=s("R0N1"),ft=s.n(ut),gt=s("ReEk"),mt=s.n(gt),vt=s("CJdK"),xt=s.n(vt),bt=s("OqH0"),yt=s.n(bt),_t=s("znxW"),wt=s.n(_t),kt=s("QFUk"),Ct=s.n(kt),Et=s("Otok"),$t=s.n(Et),Pt=s("+Gzf"),Tt=s.n(Pt),It=s("pFDs"),Ut=s.n(It),Ot=s("MpvS"),Nt=s.n(Ot),Rt=s("shfn"),St=s.n(Rt),jt=s("BU0R"),At=s.n(jt),Bt=s("IBX6"),Mt=s.n(Bt),Dt=s("4irr"),Ht=s.n(Dt),zt=s("p+ff"),Lt=s.n(zt),Ft=s("0dU7"),Kt=s.n(Ft),Vt=s("O6sU"),Wt=s.n(Vt),Jt=s("cdKu"),qt=s.n(Jt),Zt=s("RcfB"),Gt=s.n(Zt),Qt=s("om4I"),Yt=s.n(Qt),Xt=s("soQ+"),te=s.n(Xt),ee=s("vshZ"),se=s.n(ee),ie=s("EIcP"),oe=s.n(ie),ne=s("BHHE"),ae=s.n(ne),re=s("AMsT"),ce=s.n(re),le=s("hJ5J"),de=s.n(le),pe=s("4bMi"),he=s.n(pe),ue=s("hIPt"),fe=s.n(ue),ge=s("V0d3"),me=s.n(ge),ve=s("Blr3"),xe=s.n(ve),be=s("4kgo"),ye=s.n(be),_e=s("v21p"),we=s.n(_e),ke=s("jleB"),Ce=s.n(ke),Ee=s("+4Cn"),$e=s.n(Ee),Pe=s("/65J"),Te=s.n(Pe),Ie=s("QYpQ"),Ue=s.n(Ie),Oe=s("kEve"),Ne=s.n(Oe),Re=s("a46L"),Se=s.n(Re),je=s("IOsy"),Ae=s.n(je),Be=s("LL1g"),Me=s.n(Be),De=s("wV1M"),He=s.n(De),ze=s("VDOR"),Le=s.n(ze),Fe=s("KSeb"),Ke=s.n(Fe),Ve=s("ftUH"),We=s.n(Ve),Je=s("cesS"),qe=s.n(Je),Ze=s("ktBv"),Ge=s.n(Ze),Qe=s("evg7"),Ye=s.n(Qe),Xe=s("bxry"),ts=s.n(Xe),es=s("6ZTd"),ss=s.n(es),is=s("UQlB"),os=s.n(is),ns=s("TNTZ"),as=s.n(ns),rs=s("URLZ"),cs=s.n(rs),ls=s("Da7T"),ds=s.n(ls),ps=s("WyoF"),hs=s.n(ps),us=s("32sK"),fs=s.n(us),gs=s("cdUZ"),ms=s.n(gs),vs=s("e1nM"),xs=s.n(vs),bs=s("Y3Dc"),ys=s.n(bs);const _s=[{regex:/^image bmp*$/,thumb:o.a},{regex:/^image gif*$/,thumb:a.a},{regex:/^image jpeg*$/,thumb:c.a},{regex:/^image png*$/,thumb:d.a},{regex:/^image svg*$/,thumb:h.a},{regex:/^image*$/,thumb:f.a},{regex:/^audio midi*$/,thumb:m.a},{regex:/^audio flac*$/,thumb:x.a},{regex:/^audio mpeg*$/,thumb:y.a},{regex:/^audio wav*$/,thumb:w.a},{regex:/^audio ogg*$/,thumb:C.a},{regex:/^audio*$/,thumb:$.a},{regex:/^video mp4*$/,thumb:T.a},{regex:/^video webm*$/,thumb:U.a},{regex:/^video x-matroska*$/,thumb:N.a},{regex:/^video x-theora*$/,thumb:S.a},{regex:/^video x-wmv*$/,thumb:A.a},{regex:/^video*$/,thumb:M.a},{regex:/^text css*/,thumb:H.a},{regex:/^text csv*/,thumb:L.a},{regex:/^text dockerfile*/,thumb:K.a},{regex:/^text html*/,thumb:W.a},{regex:/^text rtf*/,thumb:q.a},{regex:/^text rust*/,thumb:G.a},{regex:/^text wiki*/,thumb:Y.a},{regex:/^text x-changelog*/,thumb:tt.a},{regex:/^text x-cmake*/,thumb:st.a},{regex:/^text x-csharp*/,thumb:ot.a},{regex:/^text x-csrc*/,thumb:at.a},{regex:/^text x-c\+\+src*/,thumb:ct.a},{regex:/^text x-go*/,thumb:dt.a},{regex:/^text x-haskell*/,thumb:ht.a},{regex:/^text x-hex*/,thumb:ft.a},{regex:/^text x-lua*/,thumb:mt.a},{regex:/^text (x-)?markdown*/,thumb:xt.a},{regex:/^text xml*/,thumb:yt.a},{regex:/^text x-patch*/,thumb:wt.a},{regex:/^text x-qml*/,thumb:Ct.a},{regex:/^text x-r*/,thumb:$t.a},{regex:/^text x-s(a|c)ss*/,thumb:Tt.a},{regex:/^text x-scala*/,thumb:Ut.a},{regex:/^text x-(shell)?script*/,thumb:Nt.a},{regex:/^text x-tex*/,thumb:St.a},{regex:/^text x-python*$/,thumb:At.a},{regex:/^text*/,thumb:Mt.a},{regex:/^application atom*$/,thumb:Ht.a},{regex:/^application certificate*$/,thumb:Lt.a},{regex:/^application epub*$/,thumb:Kt.a},{regex:/^application illustrator*$/,thumb:Wt.a},{regex:/^application json*$/,thumb:qt.a},{regex:/^application octet-stream*$/,thumb:Gt.a},{regex:/^application pdf*$/,thumb:Yt.a},{regex:/^application pgp-encrypted*$/,thumb:te.a},{regex:/^application pgp-signature*$/,thumb:se.a},{regex:/^application postscript*$/,thumb:oe.a},{regex:/^application x-ar*$/,thumb:ae.a},{regex:/^application x-bittorrent*$/,thumb:ce.a},{regex:/^application x-blender*$/,thumb:de.a},{regex:/^application x-bzip*$/,thumb:he.a},{regex:/^application x-cd*$/,thumb:fe.a},{regex:/^application x-*tar*$/,thumb:me.a},{regex:/^application x-deb*$/,thumb:xe.a},{regex:/^application x-designer*$/,thumb:ye.a},{regex:/^application x-desktop*$/,thumb:we.a},{regex:/^application x-executable*$/,thumb:Ce.a},{regex:/^application x-font*$/,thumb:$e.a},{regex:/^application x-gzip*$/,thumb:Te.a},{regex:/^application x-java*$/,thumb:Ue.a},{regex:/^application x-java-archive*$/,thumb:Ne.a},{regex:/^application x-javascript*$/,thumb:Se.a},{regex:/^application x-krita*$/,thumb:Ae.a},{regex:/^application x-lyx*$/,thumb:Me.a},{regex:/^application x-macbinary*$/,thumb:He.a},{regex:/^application x-ms-dos-executable*$/,thumb:Le.a},{regex:/^application x-ms-shortcut*$/,thumb:Ke.a},{regex:/^application x-mswinurl*$/,thumb:W.a},{regex:/^application x-pem-key*$/,thumb:We.a},{regex:/^application x-perl*$/,thumb:qe.a},{regex:/^application x-php*$/,thumb:Ge.a},{regex:/^application x-ruby*$/,thumb:Ye.a},{regex:/^application x-sharedlib*$/,thumb:ts.a},{regex:/^application x-shockwave-flash*$/,thumb:ss.a},{regex:/^application zip*$/,thumb:os.a},{regex:/^virtualbox-hdd*$/,thumb:as.a},{regex:/^virtualbox-ova*$/,thumb:cs.a},{regex:/^virtualbox-ovf*$/,thumb:ds.a},{regex:/^virtualbox-vbox-extpack*$/,thumb:fs.a},{regex:/^virtualbox-vbox*$/,thumb:hs.a},{regex:/^virtualbox-vdi*$/,thumb:ms.a},{regex:/^virtualbox-vmdk*$/,thumb:xs.a}],ws=function(t){const e=t.replace(/\//g," ");console.log("Matching mime",t,e);for(const t of _s)if(t.regex.test(e))return t.thumb;return ys.a};ws.mappings=_s;const ks=ws;e.a=ks},BU0R:function(t,e,s){t.exports=s.p+"application-x-python-bytecode.svg"},BcM3:function(t,e,s){t.exports=s.p+"audio-midi.svg"},Blr3:function(t,e,s){t.exports=s.p+"application-x-deb.svg"},"C/jo":function(t,e,s){t.exports=s.p+"text-x-csrc.svg"},C266:function(t,e,s){"use strict";var i=s("gNdy"),o=s("/Emu");var n=function(t){s("S0Tk")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},CJdK:function(t,e,s){t.exports=s.p+"text-x-markdown.svg"},CZ53:function(t,e,s){t.exports=s.p+"text-x-c++src.svg"},Da7T:function(t,e,s){t.exports=s.p+"virtualbox-ovf.svg"},DeYy:function(t,e,s){"use strict";var i=s("NBH9"),o=s("zHSJ");var n=function(t){s("ivrw")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},"Dz/p":function(t,e,s){"use strict";e.a={nickName:"Anonymous"}},EIcP:function(t,e,s){t.exports=s.p+"application-postscript.svg"},EWfp:function(t,e,s){"use strict";var i=s("SMbo"),o=s("NDi6");var n=function(t){s("vU+C")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},Ek9b:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".post-list{flex-basis:0;flex-grow:1;overflow:auto}.post-list-anchored{position:absolute;right:0;bottom:0}",""])},HBTi:function(t,e,s){"use strict";const i=s("kUbn").a?"ipfs/dib/repo":"ipfs/dib/test-repo-"+Math.random();e.a={repo:i,config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star"]}},EXPERIMENTAL:{pubsub:!0}}},HbUH:function(t,e,s){t.exports=s.p+"audio-x-wav.svg"},IBX6:function(t,e,s){t.exports=s.p+"text-x-generic.svg"},IOsy:function(t,e,s){t.exports=s.p+"application-x-krita.svg"},"Ibb+":function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".editable-list{display:flex;flex-direction:column;width:fit-content;width:-moz-fit-content}.editable-list-entry{display:flex}.editable-list-entry span{flex-grow:1;margin-right:.5em}",""])},KSeb:function(t,e,s){t.exports=s.p+"application-x-ms-shortcut.svg"},L9Av:function(t,e,s){t.exports=s.p+"text-x-csharp.svg"},"LH/s":function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".post-horizontal{display:inline-block}.post-highlighted{background-color:#1f2224!important}.post-container{padding:.5em;margin-left:.2em;margin-bottom:.2em;width:-moz-fit-content;width:fit-content;max-width:calc(100vw - 1.4em);background-color:#292c2f}.post{flex-direction:column}.post,.post-options{display:flex}.post-options-right{float:right}.post-options-toggle:hover{color:#969896;cursor:pointer}.post-header{display:flex;flex-direction:column}.post-header-row div{display:inline;margin-right:.3em}.post-nickname{font-weight:700}.post-petname{font-weight:600}.post-media-content{margin:1em 2em 2em .5em;max-width:fit-content;max-height:fit-content;display:flex;flex-direction:column;float:left;cursor:pointer}.post-media-content div{display:flex;flex-grow:1;max-width:100%;max-height:100%}.post-media-content div *{flex-grow:1}.post-thumbnail-container{max-width:20vw;max-height:20vh}.post-text-content{margin:.5em 1em .5em 2em;font-size:1em;white-space:pre-wrap}.post-footer{clear:both;word-wrap:break-word}.post-referenced-by{display:inline;font-size:.8em;margin-left:.2em;margin-right:.2em}",""])},LL1g:function(t,e,s){t.exports=s.p+"application-x-lyx.svg"},LPic:function(t,e,s){t.exports=s.p+"text-rust.svg"},M2Ah:function(t,e,s){t.exports=s.p+"audio-x-mpeg.svg"},"M8+j":function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("BK91");let r=class PostContainer extends i.default{constructor(){super(...arguments),this.optionsShown=!1,this.newPetName="",this.mediaExpanded=!1,this.fullSrc="",this._fileBlob=null,this.fetchingAttachment=!1,this.attachmentType="NONE"}created(){const t=this.post.attachment;t?t.mime.startsWith("image")?this.attachmentType="IMAGE":t.mime.startsWith("video")?this.attachmentType="VIDEO":t.mime.startsWith("audio")?this.attachmentType="AUDIO":this.attachmentType="OTHER":this.attachmentType="NONE"}mounted(){const t=this.$el.querySelectorAll(".post-post-link");for(let e=0;e<t.length;e++){const s=t.item(e),i=s.getAttribute("href");if(null!==i){const t=/[0-z]{46}/g.exec(i);if(null!=t){const e=t[0],i=this;s.addEventListener("mouseover",t=>{i.highlight(t,e)}),s.addEventListener("mouseout",t=>{i.unhighlight(t,e)}),s.textContent=`>>${this.prettifyId(e)}#${s.textContent}`}}}}highlight(t,e){const s="post-"+e,i=document.getElementById(s);if(null!==i){i.classList.add("post-highlighted");const e=i.cloneNode(!0);if(e instanceof HTMLElement){e.id+="-clone",e.style.position="fixed";const s=t.target.getBoundingClientRect();e.style.left=s.left+"px",e.style.top=s.top-i.getBoundingClientRect().height+"px",this.$el.appendChild(e)}}}unhighlight(t,e){const s="post-"+e,i=document.getElementById(s);null!==i&&i.classList.remove("post-highlighted");const o=document.getElementById(s+"-clone");null!==o&&o.remove()}toggleMediaExpanded(){this.updateFullSrc(),this.mediaExpanded=!this.mediaExpanded}get fetchedAttachment(){return""!==this.fullSrc}get userConfigs(){return this.$store.getters.userConfigs}get currentUser(){return this.$store.state.currentUser}get userConfig(){let t=this.userConfigs[this.currentUser];if(void 0===t)throw new Error(`Attempted to get config data for nonexistant user ${this.currentUser}`);return t}set userConfig(t){t.save(),this.$store.commit("updateUserConfig",t)}get petNames(){return this.userConfig.data.petNames}get threadConfig(){return this.$store.getters.threadConfigs[this.threadAddress]}get hidden(){return this.threadConfig.data.hiddenPosts.includes(this.post.id)}get blocked(){return this.userConfig.data.blockedNodes.includes(this.post.fromId)&&this.post.fromId!==this.$store.state.ipfsInfo.id}get referencedBy(){return[...new Set(this.post.notes.filter(t=>t.group&&"referenced-by"===t.group&&t.message).map(t=>t.message))]}get prettyFrom(){return this.post.fromId}get prettyNick(){return this.post.profile.nickName||"Anonymous"}get fromId(){return this.post.fromId}get prettyPet(){return this.petNames[this.fromId]?`(${this.petNames[this.fromId]})`:""}get prettyId(){return this.shortenId(this.post.id)}shortenId(t){return t.substr(-6,6)}prettifyId(t){const e=this.petNameOf(t);return this.shortenId(t)+(""!==e?` (${e})`:e)}postFromId(t){const e=this.post.memberOf.reduce((e,s)=>{const i=s._postById[t];return i&&e.push(i),e},[]);return e.length<1?null:e[0]}petNameOf(t){const e=this.postFromId(t);return this.petNames[e?e.fromId:""]||""}get prettyTime(){return new Date(this.post.timestamp).toLocaleString()}async updateFullSrc(){if(this.fetchingAttachment)return;const t=this.post.attachment;if(t&&(!this.fullSrc||""===this.fullSrc)){this.fetchingAttachment=!0;const e=this;this.$store.state.ipfsNode.files.get(t.content,async(s,i)=>{if(console.log("Got file!",i),s)return console.error("Failed to get file for ",e,s),void(e.fetchingAttachment=!1);e._fileBlob=new Blob(i.map(t=>t.content.buffer),{type:t.mime}),e.fullSrc=URL.createObjectURL(e._fileBlob),e.fetchingAttachment=!1}),window.setTimeout(()=>{},t.size+1e4)}}get previewSrc(){const t=this.post.attachment;return t?t.thumbnail?(console.log("Rendering preview",t),t.thumbnail):Object(a.a)(t.mime):""}get attachmentAlt(){const t=this.post.attachment;return t?t.name+", "+t.mime:"No attachment"}block(){this.userConfig.data.blockedNodes.push(this.post.fromId),this.userConfig.save(),this.optionsShown=!1}hide(){this.threadConfig.data.hiddenPosts.push(this.post.id),this.threadConfig.save(),this.optionsShown=!1}unhide(){const t=this,e=this.threadConfig.data.hiddenPosts.findIndex(e=>e===t.post.id);this.threadConfig.data.hiddenPosts.splice(e,1),this.threadConfig.save(),this.optionsShown=!1}replyTo(){this.$emit("replyTo",this.post.id)}showOptions(){this.optionsShown=!0;const t=this;this.$nextTick(()=>{const e=t.$refs.petNameInput;e instanceof HTMLElement&&e.focus()})}hideOptions(){this.newPetName="",this.optionsShown=!1}saveOptions(){i.default.set(this.petNames,this.fromId,this.newPetName),this.userConfig.save()}};r=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({props:["post","threadAddress"]})],r),e.a=r},MpvS:function(t,e,s){t.exports=s.p+"text-x-script.svg"},MyKX:function(t,e,s){t.exports=s.p+"video-x-generic.svg"},NBH9:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("X+2U");let r=class PostList extends i.default{constructor(){super(...arguments),this.isScrolledToBottom=!1}scrollToBottom(){const t=this.$refs.list;t instanceof Element&&(t.scrollTop=t.scrollHeight)}scrollIfLocked(){this.isScrolledToBottom&&this.scrollToBottom()}replyTo(t){this.$emit("replyTo",t)}get limitedPosts(){const t=this.posts.length-this.limit;return t>0?this.posts.slice(t):this.posts}mounted(){const t=this,e=this.$refs.list;e instanceof Element&&e.addEventListener("scroll",e=>{let s=e.target;t.isScrolledToBottom=s.scrollHeight-s.scrollTop===s.clientHeight})}updated(){const t=this;this.$nextTick(()=>{t.scrollIfLocked()})}};r=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({props:["posts","limit","threadAddress"],components:{"post-container":a.a}})],r),e.a=r},NDi6:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app"},[t.usersReady?s("control-panel"):t._e(),t._v(" "),t.dbReady?s("thread-view"):s("loading")],1)},staticRenderFns:[]};e.a=i},Ndzy:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("RCmh");let r=class ThreadFooter extends i.default{constructor(){super(...arguments),this.composing=!1,this.textToPost="",this.thumbnailDataUrl=void 0,this.attachedFile=void 0,this.previewWidth=a.e,this.previewHeight=a.e}get prettyUploadReady(){return null!==this.uploadStatus.uploading&&this.uploadStatus.uploading===this.attachedFile?this.uploadStatus.done?"DONE":"UPLOADING":"No file selected"}postClicked(){const t=this.uploadStatus.results;this.attachedFile&&this.attachedFile===this.uploadStatus.uploading&&this.uploadStatus.done&&t?this.$emit("new-post",this.textToPost,{name:this.attachedFile.name,mime:this.attachedFile.type,path:t.path,content:t.hash,size:t.size,thumbnail:this.thumbnailDataUrl}):this.$emit("new-post",this.textToPost),this.textToPost="",this.thumbnailDataUrl=void 0,this.attachedFile=void 0;let e=this.$refs.filein;e instanceof HTMLInputElement&&(e.value=""),this.clearAttachment(),this.composing=!1}toComposeMode(t){this.composing=!0,this.$parent.$children.forEach(t=>{t.$vnode.tag&&t.$vnode.tag.includes("PostList")&&t.$forceUpdate()});let e=this;this.$nextTick().then(()=>{let s=e.$refs.textarea;s instanceof HTMLElement&&s.focus(),t&&"function"==typeof t&&t()})}cancelCompose(){this.composing=!1}clearComposed(){this.textToPost=""}replyTo(t){if(this.textToPost+=`>>${t}\n`,this.composing){let t=this.$refs.textarea;t instanceof HTMLElement&&t.focus()}else this.toComposeMode()}clearAttachment(){this.thumbnailDataUrl=void 0,this.attachedFile=void 0;const t=this.$refs.canvas;if(t instanceof HTMLCanvasElement){const e=t.getContext("2d");e&&e.clearRect(0,0,this.previewWidth,this.previewHeight)}}uploadAttachment(){this.clearAttachment();let t=this.$refs.filein,e=this.$refs.canvas;if(t instanceof HTMLInputElement&&e instanceof HTMLCanvasElement){let s=t.files;if(null!==s&&s.length>=1){const t=this.attachedFile=s.item(0);if(t.type.startsWith("image")){const s=new Image,i=this;s.src=URL.createObjectURL(t),s.onload=(()=>{const t=e.getContext("2d");if(t){let o=s.naturalWidth,n=s.naturalHeight;if(o>=n)n=n/o*(o=a.e);else o=o/n*(n=a.e);t.drawImage(s,0,0,o,n),i.thumbnailDataUrl=e.toDataURL(),s.remove()}})}this.$emit("upload-file",t)}}}};r=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({props:["uploadStatus"]})],r),e.a=r},NwvP:function(t,e,s){t.exports=s.p+"text-csv.svg"},NxGh:function(t,e,s){"use strict";var i=s("w4PM"),o=s("4Isw"),n=s("VU/8")(i.a,o.a,!1,null,null,null);e.a=n.exports},O6sU:function(t,e,s){t.exports=s.p+"application-illustrator.svg"},OqH0:function(t,e,s){t.exports=s.p+"text-xml.svg"},Otok:function(t,e,s){t.exports=s.p+"text-x-r.svg"},QB4x:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"control-panel"},[s("div",{staticClass:"control-top"},[s("div",{staticClass:"ipfs-node-id-display"},[t._v("Your node ID is: "),s("span",{staticClass:"hash"},[t._v(t._s(t.nodeId))])]),t._v(" "),s("div",[s("span",[t._v(t._s(t.selectedUser))]),t._v(" "),s("button",{on:{click:t.toggleControlUserPanel}},[t._v("âš™")])])]),t._v(" "),t.controlUserPanelShown?s("div",{staticClass:"control-user-panel"},[s("div",{staticClass:"control-user-header"},[s("div",[s("label",{attrs:{for:"editing-user"}},[t._v("User profile")]),t._v(" "),s("select",{attrs:{name:"editing-user",placeholder:"default"},domProps:{value:t.selectedUser},on:{change:function(e){t.userChange(e.target.value)}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("-")]),t._v(" "),t._l(t.users,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newUser,expression:"newUser"}],attrs:{type:"text"},domProps:{value:t.newUser},on:{input:function(e){e.target.composing||(t.newUser=e.target.value)}}}),t._v(" "),s("button",{attrs:{disabled:t.addingUser},on:{click:t.addUser}},[t._v("ADD")])])]),t._v(" "),s("div",[s("label",{attrs:{for:"nick-name"}},[t._v("Nick")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.data.nickName,expression:"user.data.nickName"}],attrs:{type:"text",name:"nick-name",placeholder:"Anonymous"},domProps:{value:t.user.data.nickName},on:{input:function(e){e.target.composing||t.$set(t.user.data,"nickName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"control-user-settings"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.data.horizontalPosts,expression:"user.data.horizontalPosts"}],attrs:{name:"horizontal-posts",type:"checkbox"},domProps:{checked:Array.isArray(t.user.data.horizontalPosts)?t._i(t.user.data.horizontalPosts,null)>-1:t.user.data.horizontalPosts},on:{change:function(e){var s=t.user.data.horizontalPosts,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=t._i(s,null);i.checked?n<0&&(t.user.data.horizontalPosts=s.concat([null])):n>-1&&(t.user.data.horizontalPosts=s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.user.data,"horizontalPosts",o)}}}),t._v(" "),s("label",{attrs:{for:"horizontal-posts"}},[t._v("Horizontal Posts")])])]),t._v(" "),s("div",{staticClass:"control-user-lists"},[s("div",{staticClass:"list"},[s("div",{staticClass:"title"},[t._v("Pet Names")]),t._v(" "),s("editable-list",{model:{value:t.user.data.petNames,callback:function(e){t.$set(t.user.data,"petNames",e)},expression:"user.data.petNames"}})],1),t._v(" "),s("div",{staticClass:"list"},[s("div",{staticClass:"title"},[t._v("Blocked Ids")]),t._v(" "),s("editable-list",{model:{value:t.user.data.blockedNodes,callback:function(e){t.$set(t.user.data,"blockedNodes",e)},expression:"user.data.blockedNodes"}})],1)]),t._v(" "),s("div",{staticClass:"control-user-footer"},[s("button",{on:{click:t.saveUser}},[t._v("SAVE")]),t._v(" "),s("div",{staticClass:"flex-spacer"})])]):t._e()])},staticRenderFns:[]};e.a=i},QFUk:function(t,e,s){t.exports=s.p+"text-x-qml.svg"},QYpQ:function(t,e,s){t.exports=s.p+"application-x-java.svg"},Qe1a:function(t,e,s){t.exports=s.p+"image-jpeg.svg"},Qxn1:function(t,e,s){t.exports=s.p+"video-x-wmv.svg"},R0N1:function(t,e,s){t.exports=s.p+"text-x-hex.svg"},RCmh:function(t,e,s){"use strict";e.b=1e6;e.f=5e5;e.a=1e6;e.d=1e9;e.c=1e4;e.e=128;e.g=3e4},RcfB:function(t,e,s){t.exports=s.p+"application-octet-stream.svg"},ReEk:function(t,e,s){t.exports=s.p+"text-x-lua.svg"},S0Tk:function(t,e,s){var i=s("9G5C");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("3a77628a",i,!0)},SJBB:function(t,e,s){"use strict";var i=s("jxB2"),o=s("QB4x");var n=function(t){s("uROQ")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},SMbo:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("SJBB"),r=s("9Rif"),c=s("NxGh");let l=class App extends i.default{get dbReady(){return this.$store.getters.isDBReady}get usersReady(){return this.$store.getters.areUsersReady}};l=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({components:{"control-panel":a.a,"thread-view":r.a,loading:c.a}})],l),e.a=l},SZ9U:function(t,e,s){t.exports=s.p+"image-x-generic.svg"},"T+P7":function(t,e,s){"use strict";(function(t){var i=s("s+Yj"),o=s("kKK/"),n=s("mINC"),a=s("3oC0"),r=s("63PA"),c=s("M4fF"),l=(s.n(c),s("Dz/p")),d=s("RCmh");const p=s("Oc3w");e.a=class Thread{constructor(t,e,s){this.posts=[],this.synced=[],this.address="",this.backlogReplicated=!1,this.replicationProgress={done:0,target:1/0},this.initTime=0,this.isEmpty=!1,this._postsToShow=1/0,this._clocks={},this._backNotes={},this._postById={},this._haveNeededPosts=!1,this._timeUntilDesynced=1e4,this._latestPostTimestamp=0,this._lastUpdateTimestamp=0,this._queuedUpdateHandle=null,this.id=t,this.postsToShow=e,this.postProcessors=s||c.values(r)}async _initLog(t){this.address=t.address.toString(),t.onupdate=this.onEntryHandler.bind(this,"remote"),this.initTime=Date.now()}async _initOther(t){const e=this;this._nodeInfo=await new Promise((e,s)=>{t._ipfs.id((t,i)=>{t?s(t):e(i)})});const s=async()=>{e.synced=await e._pubsub.peers(e.address),e._syncedHandle=window.setTimeout(s,e._timeUntilDesynced)};this._syncedHandle=window.setTimeout(s,e._timeUntilDesynced),window.setTimeout(()=>{e.isEmpty=0===e.posts.length&&null===e.replicationProgress.done},d.g)}async init(t){const e=new a.a(t,this.id);await e.init(),this._log=e,this._pubsub=e._ipfs.pubsub,await Promise.all([this._initLog.bind(this,e)(),this._initOther.bind(this,e)()])}post(t,e,s){let i={kind:"Post",timestamp:Date.now(),fromId:this._nodeInfo.id,text:t,profile:e,attachment:s};this._add(i)}_add(e){if(!this._log)return;const s=t.isBuffer(e)?e:t.from(JSON.stringify(e));s.length<=d.f?this._log.append(s):console.error("Refused to send a post of size "+s.length+"B")}get postsToShow(){return this._postsToShow}set postsToShow(t){this._postsToShow=t,this.updateProgress()}updateProgress(t,e){e&&(this.replicationProgress.done=e),t&&this.postsToShow===1/0?(this._clocks[t.clock.id]=Math.max(this._clocks[t.clock.id]||0,t.clock.time),this.replicationProgress.target=c.values(this._clocks).reduce((t,e)=>(t||0)+(e||0))||null):this.replicationProgress.target=this.postsToShow}onEntryHandler(t){if(this._log)if(this.isEmpty=!1,Date.now()-this._lastUpdateTimestamp>=100)this.updatePosts(this._log.entries,!0);else if(null===this._queuedUpdateHandle){const t=this;this._queuedUpdateHandle=window.setTimeout(()=>{t._log&&t.updatePosts(t._log.entries,!0),t._queuedUpdateHandle=null},100)}}updatePosts(t,e=!1){this._lastUpdateTimestamp=Date.now();const s=[];console.log("ENTRIES UPDATED",t);for(let i of t){const t=p.toB58String(i.hash);let o=this._postById[t]||null;if(null!==o){const t=this._backNotes[o.id];void 0!==t&&(o.notes.push(...t),this._backNotes[o.id]=[])}else{if(0===i.type&&(this.backlogReplicated=!0),1!==i.type)continue;if(i.payload.length<=d.a){if(null===(o=this.entryToPost(i)))continue;this._postById[o.id]=o;const t=this._backNotes[o.id];void 0!==t&&(o.notes.push(...t),this._backNotes[o.id]=[]);for(const t of o.notes.filter(t=>t.group&&"references"===t.group)){const e={id:"referenced-by-"+o.id+"-"+Math.random(),type:"INFO",group:"referenced-by",message:o.id},s=this._postById[t.message];if(s)s.notes.push(e);else{this._backNotes[t.message]||(this._backNotes[t.message]=[]);const s=this._backNotes[t.message];s&&s.push(e)}}e||this.posts.push(o)}else console.log("Refusing to parse and display recieved post of size "+i.payload.length+"B",i)}e&&s.push(o)}e&&(this.posts=s);const i=this.posts.length-this.postsToShow;i>0&&(this.posts=this.posts.slice(i)),this.pruneUnusedPosts(),this.replicationProgress.done=this.posts.length,this.replicationProgress.target=this.postsToShow,this.replicationProgress.done>=this.replicationProgress.target&&(this.backlogReplicated=!0)}async pruneUnusedPosts(){const t=this;return new Promise(e=>{const s=new Set(Object.keys(t._postById));t.posts.forEach(t=>{s.delete(t.id)}),s.forEach(e=>{delete t._postById[e]})})}async destroy(){this._syncedHandle&&window.clearTimeout(this._syncedHandle),this._log&&await this._log.destroy()}entryToPost(t){if(2===t.type||3===t.type)return null;let e=JSON.parse(t.payload.toString());if(void 0===e.fromId||void 0===e.kind||void 0===e.text||void 0===e.timestamp)return null;let s=Object.assign({},e,{id:p.toB58String(t.hash),profile:Object.assign({},l.a,e.profile),notes:[],memberOf:[this]});return this.processPost(s)}processPost(t){let e=Object(o.a)(t.id),s=new i.a(e),a=new n.a(s,{self:this,nodeId:this._nodeInfo.id});return this.postProcessors.reduce((t,e,s)=>(a.kv.index=s,e(t,a)),t),t}}}).call(e,s("63KW").Buffer)},TNTZ:function(t,e,s){t.exports=s.p+"virtualbox-hdd.svg"},Tpb9:function(t,e,s){t.exports=s.p+"text-x-go.svg"},UQlB:function(t,e,s){t.exports=s.p+"application-zip.svg"},URLZ:function(t,e,s){t.exports=s.p+"virtualbox-ova.svg"},UaoV:function(t,e,s){t.exports=s.p+"text-wiki.svg"},V0d3:function(t,e,s){t.exports=s.p+"application-x-compressed-tar.svg"},VDOR:function(t,e,s){t.exports=s.p+"application-x-ms-dos-executable.svg"},VSPr:function(t,e,s){"use strict";(function(t){var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("C266"),r=s("DeYy"),c=s("zTrq"),l=s("T+P7"),d=s("eksh");let p=class ThreadView extends i.default{constructor(){super(...arguments),this.thread=new l.a("welcome",100),this.ready=!1,this.uploadStatus={uploading:null,done:!1,results:null}}created(){this.updateViewedThread("welcome",100,!0)}mounted(){const t=this;document.addEventListener("keypress",e=>{if(!(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement)){if("a"===e.key){const s=t.$refs.footer;s.composing||(s.toComposeMode(),e.preventDefault())}if("r"===e.key){const s=t.$refs.footer,i=t.thread.posts;s.composing||(i.length>0?s.replyTo(i[i.length-1].id):s.toComposeMode(),e.preventDefault())}if("u"===e.key){const s=t.$refs.footer;s.toComposeMode(()=>{const t=s.$refs.filein;t instanceof HTMLInputElement&&t.click()}),e.preventDefault()}}})}get ipfsNode(){return this.$store.state.ipfsNode}get posts(){return this.thread.posts}get userConfig(){return this.$store.getters.userConfigs[this.$store.state.currentUser]}post(t,e){console.log(this.userConfig),this.thread.post(t,this.userConfig.data.profile(),e)}replyTo(t){this.$refs.footer instanceof c.a&&this.$refs.footer.replyTo(t)}async updateViewedThread(t,e,s=!1){this.ready=!1,s||(await this.thread.destroy(),this.thread=new l.a(t,e)),await this.thread.init(this.ipfsNode),this.threadConfig=new d.a(this.thread.address),await this.$store.dispatch("addThreadConfig",this.threadConfig),this.ready=!0}uploadFile(e){this.uploadStatus={uploading:e,done:!1,results:null};const s=this,i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=(async()=>{const e=i.result,o=t.from(e);console.log("Loaded file",e,o);const n=this.$store.state.ipfsNode,a=await n.files.add(o);console.log("Added file",a),s.uploadStatus.results=a[0],s.uploadStatus.done=!0})}};p=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({components:{"thread-control":a.a,"post-list":r.a,"thread-footer":c.a}})],p),e.a=p}).call(e,s("63KW").Buffer)},VfHM:function(t,e,s){t.exports=s.p+"video-x-matroska.svg"},Vjvj:function(t,e,s){t.exports=s.p+"text-rtf.svg"},WyoF:function(t,e,s){t.exports=s.p+"virtualbox-vbox.svg"},"X+2U":function(t,e,s){"use strict";var i=s("M8+j"),o=s("nuKh");var n=function(t){s("84FM")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},XDKp:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".expand{height:100%;width:100%}.expand,.thread-view{flex-basis:0;flex-grow:1;overflow:hidden;display:flex;flex-direction:column}.centered{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}",""])},XQr6:function(t,e,s){var i=s("2ana");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("7065c9b9",i,!0)},Y2SX:function(t,e,s){t.exports=s.p+"text-html.svg"},Y3Dc:function(t,e,s){t.exports=s.p+"application-x-zerosize.svg"},YRTA:function(t,e,s){t.exports=s.p+"video-webm.svg"},ZJsj:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,"",""])},a46L:function(t,e,s){t.exports=s.p+"application-x-javascript.svg"},bxry:function(t,e,s){t.exports=s.p+"application-x-sharedlib.svg"},cE0w:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"expand"},[t.ready?s("div",{staticClass:"thread-view"},[s("thread-control",{attrs:{thread:t.thread},on:{"new-post":t.post,"changed-thread":t.updateViewedThread}}),t._v(" "),s("post-list",{attrs:{posts:t.posts,limit:t.thread.postsToShow,threadAddress:t.thread.address},on:{replyTo:t.replyTo}}),t._v(" "),s("thread-footer",{ref:"footer",attrs:{uploadStatus:t.uploadStatus},on:{"new-post":t.post,"upload-file":t.uploadFile}})],1):s("div",[t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"centered"},[e("span",[this._v("Loading thread settings...")])])}]};e.a=i},cdKu:function(t,e,s){t.exports=s.p+"application-json.svg"},cdUZ:function(t,e,s){t.exports=s.p+"virtualbox-vdi.svg"},cesS:function(t,e,s){t.exports=s.p+"application-x-perl.svg"},e1nM:function(t,e,s){t.exports=s.p+"virtualbox-vmdk.svg"},eksh:function(t,e,s){"use strict";e.a=class ThreadConfig{constructor(t){this.relativeTimestamps=!1,this.showTumbnails=!0,this.animatedThumbnails=!1,this.imageHoverExpansion=!1,this.videoHoverExpansion=!1,this.notifyOnPost=!1,this.notifyOnReply=!1,this.recursivePostHiding=!1,this.horizontalPosts=!1,this.threadName=t||"welcome",this.hiddenPosts=[]}path(){return`thread/${this.threadName}/config`}defaults(){return{relativeTimestamps:!1,showTumbnails:!0,animatedThumbnails:!1,imageHoverExpansion:!1,videoHoverExpansion:!1,notifyOnPost:!1,notifyOnReply:!1,recursivePostHiding:!0,horizontalPosts:!1,theme:{}}}}},evg7:function(t,e,s){t.exports=s.p+"application-x-ruby.svg"},ftUH:function(t,e,s){t.exports=s.p+"application-x-pem-key.svg"},gAmO:function(t,e,s){"use strict";class RNG{static range(t,e,s){return e=Math.ceil(e),s=Math.floor(s),Math.floor(t*(s-e))+e}nextRange(t,e){return RNG.range(this.next(),t,e)}}e.a=RNG},gNdy:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("92/2");let r=class ThreadControl extends i.default{constructor(){super(...arguments),this.last100=!1,this.postsToShow=1/0,this.threadIdToJoin=null,this.isTesting=!1,this.testId=null}created(){this.last100=100===this.thread.postsToShow}get testButMsg(){return this.isTesting?"STOP TEST":"START TEST"}get threadAddress(){return this.thread.address}get threadId(){return this.thread.id}get prettyProgress(){const t=this.thread.replicationProgress;return`${t.done||"?"}/${t.target||"?"}`}joinThread(t,e){null===t||""===t?console.error("Cannot join a thread with null or empty id, ignoring"):(console.log("Joining",t),this.$emit("changed-thread",t,e))}copyAddress(){Object(a.a)(this.threadAddress)}toggleTest(){this.isTesting?(this.isTesting=!1,null!==this.testId&&window.clearInterval(this.testId)):(this.isTesting=!0,this.testId=window.setInterval(()=>{this.$emit("new-post","test post text "+(new Date).toISOString())},1e3))}};r=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({props:["thread"]})],r),e.a=r},gmFm:function(t,e,s){t.exports=s.p+"audio-x-generic.svg"},go7W:function(t,e,s){t.exports=s.p+"text-css.svg"},hF7q:function(t,e,s){t.exports=s.p+"text-x-haskell.svg"},hIPt:function(t,e,s){t.exports=s.p+"application-x-cd-image.svg"},hJ5J:function(t,e,s){t.exports=s.p+"application-x-blender.svg"},im0b:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editable-list"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.toAdd,expression:"toAdd"}],attrs:{type:"text"},domProps:{value:t.toAdd},on:{input:function(e){e.target.composing||(t.toAdd=e.target.value)}}}),s("button",{on:{click:function(e){t.addEntry(t.toAdd)}}},[t._v("ADD")])]),t._v(" "),t.associative?s("div",t._l(t.map,function(e,i){return s("div",{key:i,staticClass:"editable-list-entry"},[s("span",[t._v(t._s(i))]),t._v(" "),s("input",{attrs:{type:"text"},domProps:{value:e},on:{input:function(e){t.updateEntry(i,e.target.value)}}}),t._v(" "),s("button",{on:{click:function(e){t.removeEntry(i)}}},[t._v("REMOVE")])])})):s("div",t._l(t.arr,function(e,i){return s("div",{key:e,staticClass:"editable-list-entry"},[s("span",[t._v(t._s(e))]),t._v(" "),s("button",{on:{click:function(e){t.removeEntry(i)}}},[t._v("REMOVE")])])}))])},staticRenderFns:[]};e.a=i},ivrw:function(t,e,s){var i=s("Ek9b");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("397a7b93",i,!0)},jleB:function(t,e,s){t.exports=s.p+"application-x-executable.svg"},jxB2:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o),a=s("k8aq"),r=s("tVzK");let c=class ControlPanel extends i.default{constructor(){super(...arguments),this.controlUserPanelShown=!1,this.newUser="",this.addingUser=!1,this.saving=!1}get selectedUser(){return this.$store.state.currentUser}get user(){return this.userConfigs[this.selectedUser]}created(){}get users(){return Object.keys(this.userConfigs)}get userConfigs(){return this.$store.getters.userConfigs}get nodeId(){return this.$store.state.ipfsInfo.id}userChange(t){this.$store.commit("updateUser",{newUser:t})}async saveUser(){this.saving=!0,await this.user.save(),this.saving=!1}async addUser(){this.addingUser=!0;const t=this.newUser.slice(0);this.newUser="Adding...",await this.$store.dispatch("addUserConfig",new r.a(t)),this.newUser="",this.addingUser=!1}toggleControlUserPanel(){this.controlUserPanelShown=!this.controlUserPanelShown}};c=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({components:{"editable-list":a.a}})],c),e.a=c},k2PE:function(t,e,s){t.exports=s.p+"text-dockerfile.svg"},k8aq:function(t,e,s){"use strict";var i=s("wbbS"),o=s("im0b");var n=function(t){s("rFuC")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},kEve:function(t,e,s){t.exports=s.p+"application-x-java-archive.svg"},"kKK/":function(t,e,s){"use strict";e.a=function(t){let e=0;if(0==t.length)return e;for(let s=0;s<t.length;s++){e=(e<<5)-e+t.charCodeAt(s),e&=e}return e}},kUbn:function(t,e,s){"use strict";e.a=!0},ktBv:function(t,e,s){t.exports=s.p+"application-x-php.svg"},mINC:function(t,e,s){"use strict";e.a=class PostProcessorEnvironment{constructor(t,e){this.rng=t,this.kv=e||{}}}},mS9O:function(t,e,s){var i=s("B7lx");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("f305f4c6",i,!0)},nsIE:function(t,e,s){t.exports=s.p+"image-svg+xml-compressed.svg"},nuKh:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.blocked?t._e():s("div",{staticClass:"post-container",class:t.userConfig.data.horizontalPosts?"post-horizontal":"",attrs:{id:"post-"+t.post.id}},[t.optionsShown?s("div",{staticClass:"post-options"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPetName,expression:"newPetName"}],ref:"petNameInput",attrs:{type:"text"},domProps:{value:t.newPetName},on:{input:function(e){e.target.composing||(t.newPetName=e.target.value)}}}),t._v(" "),s("button",{on:{click:t.hide}},[t._v("HIDE")]),t._v(" "),s("button",{on:{click:t.block}},[t._v("BLOCK")]),t._v(" "),s("div",{staticClass:"post-options-right"},[s("button",{staticClass:"post-options-save",on:{click:t.saveOptions}},[t._v("SAVE")]),t._v(" "),s("button",{staticClass:"post-options-close",on:{click:t.hideOptions}},[t._v("CLOSE")])])]):t._e(),t._v(" "),t.hidden||t.blocked?t.blocked?t._e():s("div",{staticClass:"post-hidden"},[s("button",{on:{click:t.unhide}},[t._v("âž•")])]):s("div",{staticClass:"post"},[s("div",{staticClass:"post-header"},[s("div",{staticClass:"post-header-row"},[s("div",{staticClass:"post-nickname",attrs:{title:t.prettyFrom}},[t._v(t._s(t.prettyNick))]),t._v(" "),s("div",{staticClass:"post-petname"},[t._v(t._s(t.prettyPet))]),t._v(" "),s("div",{staticClass:"post-timestamp"},[t._v(t._s(t.prettyTime))]),t._v(" "),s("div",{staticClass:"post-id hash link"},[s("span",{on:{click:t.replyTo}},[t._v(t._s(t.prettyId))])]),t._v(" "),s("div",{staticClass:"post-options-toggle"},[t.optionsShown?s("span",{on:{click:t.hideOptions}},[t._v("â–²")]):s("span",{on:{click:t.showOptions}},[t._v("â–¼")])])]),t._v(" "),t.post.attachment?s("div",{staticClass:"post-media-info post-header-row"},[t.fetchedAttachment?s("span",[s("a",{attrs:{href:t.fullSrc,download:t.post.attachment.name}},[t._v(t._s(t.post.attachment.name))])]):s("span",[t._v(t._s(t.post.attachment.name))]),t._v(" "),s("span",[t._v(t._s(t.post.attachment.size))])]):t._e()]),t._v(" "),s("div",{staticClass:"post-body"},[t.post.attachment?s("div",{staticClass:"post-media-content"},["IMAGE"===t.attachmentType?s("div",[t.mediaExpanded&&!t.fetchingAttachment?s("div",{on:{click:t.toggleMediaExpanded}},[s("img",{attrs:{src:t.fullSrc,alt:t.attachmentAlt}})]):s("div",{staticClass:"post-thumbnail-container",style:t.fetchingAttachment?"cursor: progress":"",on:{click:t.toggleMediaExpanded}},[s("img",{attrs:{src:t.previewSrc,alt:t.attachmentAlt,width:"128"}})])]):s("div",[t.mediaExpanded&&!t.fetchingAttachment?s("div",[s("a",{attrs:{href:t.fullSrc,download:t.post.attachment.name}},[s("img",{attrs:{src:t.previewSrc,alt:t.attachmentAlt}})])]):s("div",{style:"cursor: "+(t.fetchingAttachment?"progress":"pointer"),on:{click:t.toggleMediaExpanded}},[s("img",{attrs:{src:t.previewSrc,alt:t.attachmentAlt}})])]),t._v(" "),t.fetchingAttachment?s("div",{staticStyle:{}},[t._v("Downloading...")]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"post-text-content",domProps:{innerHTML:t._s(t.post.text)}})]),t._v(" "),s("div",{staticClass:"post-footer"},t._l(t.referencedBy,function(e){return s("div",{key:e,staticClass:"post-referenced-by"},[s("a",{attrs:{href:"#post-"+e},on:{mouseover:function(s){return t.highlight(s,e)},mouseout:function(s){return t.unhighlight(s,e)}}},[t._v(">>"+t._s(t.prettifyId(e))+"#")])])}))])])},staticRenderFns:[]};e.a=i},om4I:function(t,e,s){t.exports=s.p+"application-pdf.svg"},"p+ff":function(t,e,s){t.exports=s.p+"application-certificate.svg"},p8hU:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".app{height:100vh;display:flex;flex-direction:column;overflow:hidden}",""])},pFDs:function(t,e,s){t.exports=s.p+"text-x-scala.svg"},pS9q:function(t,e,s){t.exports=s.p+"video-mp4.svg"},pYpQ:function(t,e,s){t.exports=s.p+"audio-x-flac.svg"},qw2f:function(t,e,s){var i=s("APhI");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("376b855c",i,!0)},rFuC:function(t,e,s){var i=s("Ibb+");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("4d494428",i,!0)},"s+Yj":function(t,e,s){"use strict";var i=s("gAmO");e.a=class MWC extends i.a{constructor(t){super(),this.seed=t,this.next=(()=>{this.m_z=36969*(65535&this.m_z)+(this.m_z>>16)&this.mask,this.m_w=18e3*(65535&this.m_w)+(this.m_w>>16)&this.mask;let t=(this.m_z<<16)+this.m_w&this.mask;return t/=4294967296,t+=.5,this.last=t,t}),this.m_w=t,this.m_z=987654321,this.mask=4294967295,this.last=0}}},shfn:function(t,e,s){t.exports=s.p+"text-x-tex.svg"},"soQ+":function(t,e,s){t.exports=s.p+"application-pgp-encrypted.svg"},tVzK:function(t,e,s){"use strict";var i=s("2XwM");e.a=class UserConfig{constructor(t){this.nickName="",this.petNames={},this.blockedNodes=[],this.horizontalPosts=!1,this.userName=t||"default",this.petNames[i.a.state.ipfsInfo.id]="You"}path(){return`user/${this.userName}/config`}defaults(){}profile(){if(this.nickName&&""!==this.nickName)return{nickName:this.nickName}}}},uROQ:function(t,e,s){var i=s("x/8l");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("c6f213d4",i,!0)},uqFA:function(t,e,s){t.exports=s.p+"text-x-changelog.svg"},v21p:function(t,e,s){t.exports=s.p+"application-x-desktop.svg"},"vU+C":function(t,e,s){var i=s("p8hU");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);s("rjj0")("7840d22e",i,!0)},vshZ:function(t,e,s){t.exports=s.p+"application-pgp-signature.svg"},vviU:function(t,e,s){t.exports=s.p+"text-x-cmake.svg"},w4PM:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o);let a=class Loading extends i.default{};a=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n.a],a),e.a=a},wV1M:function(t,e,s){t.exports=s.p+"application-x-macbinary.svg"},wbbS:function(t,e,s){"use strict";var i=s("7+uW"),o=s("c+8m"),n=s.n(o);function a(t){return!Array.isArray(t)}let r=class EditableList extends i.default{constructor(){super(...arguments),this.toAdd=""}get map(){return a(this.value)?this.value:{}}get arr(){return a(this.value)?[]:this.value}created(){a(this.value)?this.associative=!0:this.associative=!1}update(){this.$emit("input",this.associative?this.map:this.arr)}addEntry(t){""!==this.toAdd&&(this.associative?i.default.set(this.map,t,""):this.arr.push(t),this.toAdd="",this.update())}updateEntry(t,e){this.associative?(i.default.set(this.map,t,e),this.update()):console.error("Tried to update value in array (no logical operation)",this,t,e)}removeEntry(t){this.associative&&"string"==typeof t?(i.default.delete(this.map,t),this.update()):"number"==typeof t?(this.arr.splice(t,1),this.update()):console.log("Tried to remove from ",this.associative?this.map:this.arr," with ",t)}};r=(this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a})([n()({props:["value"]})],r),e.a=r},"x/8l":function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".control-panel{font-size:1em;display:flex;flex-direction:column}.control-top{display:flex;justify-content:space-between}.control-user-panel{border-top:1px solid #c5c8c6;background-color:#1f2224;display:flex;flex-direction:column;padding:1em}.control-user-header{display:flex}.control-user-settings{margin:1em}.control-user-lists,.control-user-settings{display:flex;flex-wrap:wrap}.control-user-lists .list{margin-right:1em;margin-bottom:.5em;background-color:#292c2f;display:flex;flex-direction:column}.control-user-lists .list .title{font-weight:700;text-decoration:underline}.control-user-footer{display:flex}.flex-spacer{flex-grow:100}",""])},xHMk:function(t,e,s){t.exports=s.p+"application-ogg.svg"},yUUW:function(t,e,s){"use strict";(function(t){s.d(e,"c",function(){return i}),s.d(e,"d",function(){return o}),s.d(e,"a",function(){return n}),s.d(e,"b",function(){return a});s("Oc3w");function i(e){if(0===e.type){const s=e.payload.length,i=t.alloc(13+s);let o=0;return i[o]=e.type,o+=1,o=i.writeUIntBE(e.clock,o,6),o=i.writeUIntBE(s,o,6),o+=e.payload.copy(i,o),console.log("ENCODED:",e,i),i}if(1===e.type){const s=e.heads.reduce((t,e)=>t+e.length,0),i=e.payload.length,o=t.alloc(13+s+6+i);let n=0;o[n]=e.type,n+=1,n=o.writeUIntBE(e.clock,n,6),n=o.writeUIntBE(s,n,6);for(const t of e.heads)n+=t.copy(o,n);return n=o.writeUIntBE(i,n,6),n+=e.payload.copy(o,n),o}if(2===e.type||3===e.type){const s=e.heads.reduce((t,e)=>t+e.length,0),i=t.alloc(19+s);let o=0;i[o]=e.type,o+=1,o=i.writeUIntBE(e.clock,o,6),o=i.writeUIntBE(e.left,o,6),o=i.writeUIntBE(s,o,6);for(const t of e.heads)o+=t.copy(i,o);return i}throw new RangeError(`ENCODE: Invalid Entry.type (${e})`)}function o(e){return t.concat([e.hash,i(e)])}function n(e,s){let i=0;const o=s.readUInt8(0);i+=1;const n=s.readUIntBE(i,6);if(i+=6,0===o){if(0!==n)throw new RangeError(`DECODE: Invalid Entry.clock for RootEntry (${n})`);const o=s.readUIntBE(i,6);i+=6;const a=t.alloc(o);return s.copy(a,0,i),{type:0,clock:0,hash:e,payload:a}}if(1===o){if(n<1)throw new RangeError(`DECODE: Invalid Entry.clock for AppendEntry (${n})`);const a=s.readUIntBE(i,6);i+=6;const r=[];let c=0,l=s.slice(i);for(;c<a;){const e=34,s=t.alloc(e);l.copy(s,0,0,e),r.push(s),l=l.slice(e),c+=e}i+=c;const d=s.readUIntBE(i,6);i+=6;const p=t.alloc(d);return s.copy(p,0,i),{type:o,clock:n,hash:e,heads:r,payload:p}}if(2===o||3===o){if(n<1)throw new RangeError(`DECODE: Invalid Entry.clock for MetaEntry (${n})`);const a=s.readUIntBE(i,6);i+=6;const r=s.readUIntBE(i,6);i+=6;const c=[];let l=0,d=s.slice(i);for(;l<r;){const e=34,s=t.alloc(e);d.copy(s,0,0,e),c.push(s),d=d.slice(e),l+=e}return i+=l,{type:o,clock:n,left:a,hash:e,heads:c}}throw new RangeError(`DECODE: Invalid Entry.type (${o})`)}function a(e){const s=t.alloc(34);return e.copy(s,0,0,34),n(s,e.slice(34))}}).call(e,s("63KW").Buffer)},zHSJ:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"list",staticClass:"post-list"},[t._l(t.limitedPosts,function(e){return s("post-container",{key:e.id,attrs:{post:e,threadAddress:t.threadAddress},on:{replyTo:t.replyTo}})}),t._v(" "),t.isScrolledToBottom?s("div",{staticClass:"post-list-anchored"},[t._v("Locked")]):t._e()],2)},staticRenderFns:[]};e.a=i},zTrq:function(t,e,s){"use strict";var i=s("Ndzy"),o=s("+8Vz");var n=function(t){s("XQr6")},a=s("VU/8")(i.a,o.a,!1,n,null,null);e.a=a.exports},znxW:function(t,e,s){t.exports=s.p+"text-x-patch.svg"}},["AKhD"]);